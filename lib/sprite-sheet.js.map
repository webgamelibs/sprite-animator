{"version":3,"file":"sprite-sheet.js","sourceRoot":"","sources":["../src/sprite-sheet.ts"],"names":[],"mappings":"AAkBA,MAAM,YAAY,GAAG,IAAI,OAAO,EAAoC,CAAA;AACpE,IAAI,SAAS,GAAG,CAAC,CAAA;AAEjB,MAAM,UAAU,gBAAgB,CAAC,QAAgB,EAAE,KAAkB;IACnE,IAAI,QAAQ,GAAG,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;IACtC,IAAI,CAAC,QAAQ,EAAE,CAAC;QACd,QAAQ,GAAG,IAAI,GAAG,EAAkB,CAAA;QACpC,YAAY,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;IACnC,CAAC;IAED,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC;QAC5B,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,GAAG,QAAQ,IAAI,SAAS,EAAE,EAAE,CAAC,CAAC,CAAA;IAClE,CAAC;IAED,OAAO,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAE,CAAA;AAChC,CAAC","sourcesContent":["export interface Frame {\n  x: number\n  y: number\n  w: number\n  h: number\n}\n\nexport type Animation = {\n  frames: string[],\n  fps: number,\n  loop: boolean\n}\n\nexport type SpriteSheet = {\n  frames: Record<string, Frame>\n  animations: Record<string, Animation>\n}\n\nconst sheetIdCache = new WeakMap<SpriteSheet, Map<string, string>>()\nlet idCounter = 0\n\nexport function getCachedSheetId(imageUrl: string, sheet: SpriteSheet): string {\n  let innerMap = sheetIdCache.get(sheet)\n  if (!innerMap) {\n    innerMap = new Map<string, string>()\n    sheetIdCache.set(sheet, innerMap)\n  }\n\n  if (!innerMap.has(imageUrl)) {\n    innerMap.set(imageUrl, CSS.escape(`${imageUrl}#${idCounter++}`))\n  }\n\n  return innerMap.get(imageUrl)!\n}\n"]}