{"version":3,"file":"sprite-animator.js","sourceRoot":"","sources":["../src/sprite-animator.ts"],"names":[],"mappings":"AAQA,SAAS,cAAc,CAAC,IAAY,EAAE,MAAe;IACnD,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAA;IACvB,MAAM,KAAK,GAAa,EAAE,CAAA;IAC1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QAC3B,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAA;QACzB,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;QACnB,MAAM,KAAK,GAAG,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAA;QAC3D,KAAK,CAAC,IAAI,CAAC,GAAG,GAAG,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IAC9C,CAAC;IACD,MAAM,IAAI,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IAC1B,MAAM,SAAS,GAAG,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAA;IACrE,KAAK,CAAC,IAAI,CAAC,UAAU,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IAC7C,OAAO,cAAc,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAA;AACvD,CAAC;AAED,MAAM,OAAO,cAAc;IACzB,GAAG,CAAa;IAChB,QAAQ,CAAkB;IAE1B,YAAY,SAAsB,EAAE,IAA2B;QAC7D,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;QACxC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QAE/B,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAA;QACxB,CAAC,CAAC,eAAe,GAAG,OAAO,IAAI,CAAC,QAAQ,GAAG,CAAA;QAC3C,CAAC,CAAC,gBAAgB,GAAG,WAAW,CAAA;QAEhC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;QAC/C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;IAC1C,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAA;QACjB,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAA;IACxB,CAAC;CACF","sourcesContent":["import { Frame, SpriteSheet } from './sprite-sheet'\n\nexport interface SpriteAnimatorOptions {\n  imageUrl: string\n  sheet: SpriteSheet\n  animation: string\n}\n\nfunction buildKeyframes(name: string, frames: Frame[]): string {\n  const n = frames.length\n  const steps: string[] = []\n  for (let i = 0; i < n; i++) {\n    const pct = (i / n) * 100\n    const f = frames[i]\n    const decls = [`background-position: ${-f.x}px ${-f.y}px;`]\n    steps.push(`${pct}% { ${decls.join(' ')} }`)\n  }\n  const last = frames[n - 1]\n  const lastDecls = [`background-position: ${-last.x}px ${-last.y}px;`]\n  steps.push(`100% { ${lastDecls.join(' ')} }`)\n  return `@keyframes ${name} {\\n${steps.join('\\n')}\\n}`\n}\n\nexport class SpriteAnimator {\n  #el: HTMLElement\n  #styleEl: HTMLStyleElement\n\n  constructor(container: HTMLElement, opts: SpriteAnimatorOptions) {\n    this.#el = document.createElement('div')\n    container.appendChild(this.#el)\n\n    const s = this.#el.style\n    s.backgroundImage = `url(${opts.imageUrl})`\n    s.backgroundRepeat = 'no-repeat'\n\n    this.#styleEl = document.createElement('style')\n    document.head.appendChild(this.#styleEl)\n  }\n\n  remove() {\n    this.#el.remove()\n    this.#styleEl.remove()\n  }\n}\n"]}